<div class= "card col col-12 col-md-6 post-item p-2 border-0 h-100 align-content-stretch">
  <div class="row g-0 border rounded shadow h-100">
    <div class="col-12 col-lg-5 position-relative post-image-container">
      <% if post.is_a?(Photo) && post.image.attached?  %>
          <%= link_to photo_path(post.id), data: { turbo_frame: "remote_modal" } do %>
            <%= image_tag post.image , class: "img-fluid rounded-start post-image w-100" %>
          <% end %> 
      <% elsif post.is_a?(Album) %>
        <%if post.photos.size > 0  %>
            <%= link_to album_path(post.id), data: { turbo_frame: "remote_modal" } do %>
              <% post.photos.each do |photo| %>
                <% if photo.image.attached? %>
                    <%= image_tag photo.image , class: "img-fluid rounded-start post-image w-100 h-100" %>
                <% end %>
              <% end %>
            <% end %>
        <% else %>
          <%= render "shared/empty_album" %>
        <% end %>
        <span class="position-absolute rounded-circle text-white z-100 home-image-counter">
          <b class='text-center m-0 fs-4'><%= post.photos.size %></b>
          <p class='text-center m-0'>PHOTOS</p>
        </span>
      <% end %>
    </div>
    <div class="col-12 col-lg-7">
      <div class="card-body d-flex flex-column h-100">
        <div class="d-flex align-items-center justify-content-between mb-3">
          <%= link_to profile_path(post.user), class: "col-lg-8 d-flex align-items-center text-decoration-none text-primary me-1" do %>
            <%= image_tag post.user.avatar, class: "mini-avatar" %>
            <h6 class='ms-2 my-0 fs-7'><%= post.user.fname + " " + post.user.lname%> </h6>
          <% end %>
          <%= render partial: 'shared/follow_button', locals: {profile_user_id: post.user.id, is_followed: current_user && current_user.follow?(post.user.id)} %> 
        </div>
        <h5 class="card-title"><%= post.title %></h5>
        <p class="card-text"><%=post.description %></p>
        <div class="d-flex justify-content-between mt-auto align-items-center">
          
          <%= render partial: "shared/like_button", locals: {post: post} %>
          <p class="card-text"><small class="text-muted"><%= post.created_at %></small></p>
        </div>
      </div>
    </div>
  </div>
</div>